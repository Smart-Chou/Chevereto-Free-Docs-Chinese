import{r as o,o as c,c as r,a as n,b as a,w as t,F as u,e as p,d as s}from"./app.292a7b1f.js";import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";const k={},b=p('<h1 id="running" tabindex="-1"><a class="header-anchor" href="#running" aria-hidden="true">#</a> Running</h1><h2 id="persistent-layers" tabindex="-1"><a class="header-anchor" href="#persistent-layers" aria-hidden="true">#</a> Persistent layers</h2><h3 id="asset-storage" tabindex="-1"><a class="header-anchor" href="#asset-storage" aria-hidden="true">#</a> Asset storage</h3><div class="custom-container tip"><p class="custom-container-title">Local asset storage</p><p>To use Local Storage is required to mount the appropriate volume in a path visible to the application.</p></div>',4),d=s("For asset storage you can use any supported "),_=s("external storage"),h=s(" API. This need to be configured passing "),m=s("Assets environment variables"),E=s("."),y=n("h3",{id:"sessions",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#sessions","aria-hidden":"true"},"#"),s(" Sessions")],-1),v=s("For persistent sessions you can use Redis by configuring the "),T=s("Session environment variables"),S=s(" variables."),g=p(`<h3 id="database" tabindex="-1"><a class="header-anchor" href="#database" aria-hidden="true">#</a> Database</h3><p>For database you can create a volume for persistence, or use a server over the network. If you manual provide the database you will need to create its user binding:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker <span class="token builtin class-name">exec</span> chv-mariadb mysql -uroot -ppassword -e <span class="token string">&quot;CREATE DATABASE chevereto; \\
    CREATE USER &#39;chevereto&#39; IDENTIFIED BY &#39;user_database_password&#39;; \\
    GRANT ALL ON chevereto.* TO &#39;chevereto&#39; IDENTIFIED BY &#39;user_database_password&#39;;&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="user-uploads-storage" tabindex="-1"><a class="header-anchor" href="#user-uploads-storage" aria-hidden="true">#</a> User uploads storage</h3>`,4),R=s("This persistent layer can be configured in the application "),O=s("Dashboard panel"),A=s("."),f=n("h2",{id:"compose",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#compose","aria-hidden":"true"},"#"),s(" Compose")],-1),w={class:"custom-container tip"},C=n("p",{class:"custom-container-title"},"\u63D0\u793A",-1),H=s("Check "),V=s("Environment"),x=s(" for the "),D=n("code",null,"-e",-1),B=s(" options you can pass in the Docker command."),L=s("In the following example volumes are used for all data persistence. The image used is "),P={href:"https://github.com/chevereto/container-builder/blob/3.20/httpd-php.Dockerfile",target:"_blank",rel:"noopener noreferrer"},G=s("httpd-php"),I=s(" which includes Apache HTTP Web server."),N=p(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">chv-database</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">:</span>focal
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> chv<span class="token punctuation">-</span>network
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> chv<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> password
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> chevereto
      <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> chevereto
      <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> user_database_password

  <span class="token key atrule">chv-build</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> owner/image<span class="token punctuation">:</span>httpd<span class="token punctuation">-</span>php
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> chv<span class="token punctuation">-</span>network
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> chv<span class="token punctuation">-</span>storage<span class="token punctuation">:</span>/var/www/html/images/
      <span class="token punctuation">-</span> chv<span class="token punctuation">-</span>assets<span class="token punctuation">:</span>/var/www/html/_assets/
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">CHEVERETO_DB_HOST</span><span class="token punctuation">:</span> chv<span class="token punctuation">-</span>database
      <span class="token key atrule">CHEVERETO_DB_USER</span><span class="token punctuation">:</span> chevereto
      <span class="token key atrule">CHEVERETO_DB_PASS</span><span class="token punctuation">:</span> user_database_password
      <span class="token key atrule">CHEVERETO_DB_PORT</span><span class="token punctuation">:</span> <span class="token number">3306</span>
      <span class="token key atrule">CHEVERETO_DB_NAME</span><span class="token punctuation">:</span> chevereto
      <span class="token key atrule">CHEVERETO_HTTPS</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_TYPE</span><span class="token punctuation">:</span> local
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_URL</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8080/_assets/
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_BUCKET</span><span class="token punctuation">:</span> /var/www/html/_assets/

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">chv-data</span><span class="token punctuation">:</span>
  <span class="token key atrule">chv-assets</span><span class="token punctuation">:</span>
  <span class="token key atrule">chv-storage</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">chv-network</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div>`,1),U=n("strong",null,"Note",-1),F=s(" that "),Y=n("code",null,"CHEVERETO_ASSET_STORAGE",-1),q=s(" is mapped to the mounted volume "),M=n("code",null,"chv-assets",-1),Q=s(" and to the same URL. This can be mapped to any supported "),K=s("external storage"),W=s(" API:"),j=p(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token key atrule">chv-build</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> owner/image<span class="token punctuation">:</span>httpd<span class="token punctuation">-</span>php
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> chv<span class="token punctuation">-</span>network
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">CHEVERETO_DB_HOST</span><span class="token punctuation">:</span> chv<span class="token punctuation">-</span>database
      <span class="token key atrule">CHEVERETO_DB_USER</span><span class="token punctuation">:</span> chevereto
      <span class="token key atrule">CHEVERETO_DB_PASS</span><span class="token punctuation">:</span> user_database_password
      <span class="token key atrule">CHEVERETO_DB_PORT</span><span class="token punctuation">:</span> <span class="token number">3306</span>
      <span class="token key atrule">CHEVERETO_DB_NAME</span><span class="token punctuation">:</span> chevereto
      <span class="token key atrule">CHEVERETO_HTTPS</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_NAME</span><span class="token punctuation">:</span> assets
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_TYPE</span><span class="token punctuation">:</span> s3
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_KEY</span><span class="token punctuation">:</span>  key
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_SECRET</span><span class="token punctuation">:</span> secret
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_BUCKET</span><span class="token punctuation">:</span> bucket<span class="token punctuation">-</span>name
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_URL</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//s3<span class="token punctuation">-</span>us<span class="token punctuation">-</span>west<span class="token punctuation">-</span>1.amazonaws.com/bucket<span class="token punctuation">-</span>name/
      <span class="token key atrule">CHEVERETO_ASSET_STORAGE_REGION</span><span class="token punctuation">:</span> s3<span class="token punctuation">-</span>us<span class="token punctuation">-</span>west<span class="token punctuation">-</span><span class="token number">1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="first-run" tabindex="-1"><a class="header-anchor" href="#first-run" aria-hidden="true">#</a> First run</h2>`,2),z=s("Refer to "),J=s("First-steps"),X=s(" instructions.");function Z($,ss){const e=o("RouterLink"),l=o("ExternalLinkIcon");return c(),r(u,null,[b,n("p",null,[d,a(e,{to:"/features/integrations/external-storage.html"},{default:t(()=>[_]),_:1}),h,a(e,{to:"/setup/system/environment.html#assets-variables"},{default:t(()=>[m]),_:1}),E]),y,n("p",null,[v,a(e,{to:"/setup/system/environment.html#session-variables"},{default:t(()=>[T]),_:1}),S]),g,n("p",null,[R,a(e,{to:"/settings/external-storage.html"},{default:t(()=>[O]),_:1}),A]),f,n("div",w,[C,n("p",null,[H,a(e,{to:"/setup/system/environment.html"},{default:t(()=>[V]),_:1}),x,D,B])]),n("p",null,[L,n("a",P,[G,a(l)]),I]),N,n("p",null,[U,F,Y,q,M,Q,a(e,{to:"/features/integrations/external-storage.html"},{default:t(()=>[K]),_:1}),W]),j,n("p",null,[z,a(e,{to:"/manual/first-steps/"},{default:t(()=>[J]),_:1}),X])],64)}var es=i(k,[["render",Z]]);export{es as default};
