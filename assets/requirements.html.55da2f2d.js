import{r as c,o as l,c as i,a as n,b as a,w as p,F as r,e as t,d as s}from"./app.eeb85bd8.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const d={},k=t('<h1 id="requirements" tabindex="-1"><a class="header-anchor" href="#requirements" aria-hidden="true">#</a> Requirements</h1><h2 id="php" tabindex="-1"><a class="header-anchor" href="#php" aria-hidden="true">#</a> PHP</h2><table><thead><tr><th>Version</th><th>PHP</th></tr></thead><tbody><tr><td>3.20</td><td>7.4</td></tr></tbody></table>',3),b=s("Chevereto is "),h={href:"https://php.net/",target:"_blank",rel:"noopener noreferrer"},m=s("PHP"),g=s(" software, it has been designed using:"),v={href:"https://deb.sury.org/",target:"_blank",rel:"noopener noreferrer"},f=s("PHP packages"),_=s(" from Ond\u0159ej Sur\xFD."),y={href:"https://www.php.net/manual/en/extensions.membership.php",target:"_blank",rel:"noopener noreferrer"},w=s("PHP extensions"),x=s(" provided by "),P={href:"https://pecl.php.net/",target:"_blank",rel:"noopener noreferrer"},q=s("PECL"),M=s("."),I=t(`<p>Packages and PECL provides the same convenience, but as packages are made for debian-based systems you should prefer PECL if you don&#39;t have a compatible system.</p><div class="custom-container warning"><p class="custom-container-title">Packages vs PECL</p><p>Packages not only contain the software, it could trigger other effects in the system.</p></div><h3 id="php-configuration" tabindex="-1"><a class="header-anchor" href="#php-configuration" aria-hidden="true">#</a> PHP configuration</h3><p>The following <code>ini</code> values are recommended for Chevereto installations.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>upload_max_filesize <span class="token operator">=</span> 50M<span class="token punctuation">;</span>
post_max_size <span class="token operator">=</span> 50M<span class="token punctuation">;</span>
max_execution_time <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
memory_limit <span class="token operator">=</span> 512M<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>Property</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>upload_max_filesize</td><td>Maximum upload size</td><td><code>50M</code> for 50 MB</td></tr><tr><td>post_max_size</td><td>Maximum post size</td><td>Same as above</td></tr><tr><td>max_execution_time</td><td>Maximum time to execute the software, in seconds</td><td><code>30</code> for 30 seconds</td></tr><tr><td>memory_limit</td><td>Maximum memory to allocate</td><td><code>512M</code> for 512 MB</td></tr></tbody></table>`,6),H=s("You can toggle this limits to reflect your hardware and server load. Check this article for more info: "),C={href:"http://www.php.net/manual/en/features.file-upload.common-pitfalls.php",target:"_blank",rel:"noopener noreferrer"},R=s("PHP common pitfalls"),D=s("."),F=t('<h3 id="php-extensions" tabindex="-1"><a class="header-anchor" href="#php-extensions" aria-hidden="true">#</a> PHP Extensions</h3><p>The following PHP extensions are required for Chevereto.</p><ul><li>curl</li><li>exif</li><li>fileinfo</li><li>hash</li><li>imagick</li><li>gd</li><li>json</li><li>mbstring</li><li>pdo</li><li>pdo-mysql</li><li>session</li><li>xml</li><li>zip</li></ul><h3 id="php-features" tabindex="-1"><a class="header-anchor" href="#php-features" aria-hidden="true">#</a> PHP Features</h3><p>Chevereto requires unrestricted access to all PHP functions. If any PHP function is removed it could cause Chevereto to fail or to not work at all. Note that the following functions must not be restricted:</p>',5),E={href:"https://www.php.net/set-time-limit",target:"_blank",rel:"noopener noreferrer"},L=s("set_time_limit"),A=n("h2",{id:"image-library",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#image-library","aria-hidden":"true"},"#"),s(" Image library")],-1),G=n("p",null,[s("The image library (GD, Imagick) should be provided with support for "),n("code",null,"PNG GIF JPG BMP WEBP"),s(". By default, Chevereto uses Imagick and fallback to GD.")],-1),$=s("If you need to explicit use GD you can add this key to "),B=s("Settings file"),S=s(":"),N=t(`<div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$settings</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;image_library&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;gd&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,1),T={class:"custom-container danger"},z=n("p",{class:"custom-container-title"},"Workaround missing formats",-1),V=s("If the server doesn't provide support for all the image formats handled by Chevereto you must use the following "),O=s("Settings file"),j=s(" workaround."),W=t(`<p>In the following example Chevereto is configured with explicit support only for PNG, GIF, BMP and JPG (removes WEBP):</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$settings</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;image_formats_available&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;PNG&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;GIF&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;BMP&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;JPG&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,2),J=n("h2",{id:"configuring-image-library",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#configuring-image-library","aria-hidden":"true"},"#"),s(" Configuring image library")],-1),U=s("Check for "),K=s("CHEVERETO_IMAGE_LIBRARY"),X=s(" for changing the default image library used by Chevereto."),Y=t(`<h3 id="imagemagick" tabindex="-1"><a class="header-anchor" href="#imagemagick" aria-hidden="true">#</a> ImageMagick</h3><p>Additional recommended ImageMagick configuration at <code>/etc/ImageMagick-6/policy.xml</code> file:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>policymap</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- policies --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>policy</span> <span class="token attr-name">domain</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>16KP<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>policy</span> <span class="token attr-name">domain</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>height<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>16KP<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>policymap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="filesystem" tabindex="-1"><a class="header-anchor" href="#filesystem" aria-hidden="true">#</a> Filesystem</h3><p>User running <code>php</code> must be in the owner group of your installation directory. This is required to allow Chevereto to modify the filesystem for uploading, one-click update and many other features.</p><p>Chevereto user will require <strong>read/write</strong> access in the following paths:</p><ul><li><code>/tmp</code></li><li><code>app/content/</code></li><li><code>app/content/languages/</code></li><li><code>app/content/languages/cache/</code></li><li><code>app/content/system/</code></li><li><code>content/</code></li><li><code>images/</code></li></ul><h2 id="database" tabindex="-1"><a class="header-anchor" href="#database" aria-hidden="true">#</a> Database</h2><table><thead><tr><th>Version</th><th>MySQL</th><th>MariaDB</th></tr></thead><tbody><tr><td>3.20</td><td>5.7, 8</td><td>10</td></tr></tbody></table><ul><li>Database user must have <code>ALL PRIVILEGES</code> over the target database</li><li>InnoDB table storage engine</li></ul>`,10),Q={class:"custom-container danger"},Z=n("p",{class:"custom-container-title"},"Upgrading from old installation",-1),nn=s("Old versions using MyISAM table storage engine will require to convert the old tables to InnoDB. Read "),sn={href:"https://dev.mysql.com/doc/refman/8.0/en/converting-tables-to-innodb.html",target:"_blank",rel:"noopener noreferrer"},an=s("Convert MyISAM tables to InnoDB"),en=n("h2",{id:"web-server-configuration",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#web-server-configuration","aria-hidden":"true"},"#"),s(" Web server configuration")],-1),tn=n("h3",{id:"apache-http-server",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#apache-http-server","aria-hidden":"true"},"#"),s(" Apache HTTP server")],-1),on=s("Make sure that "),pn={href:"https://httpd.apache.org/docs/current/mod/mod_rewrite.html",target:"_blank",rel:"noopener noreferrer"},cn=n("code",null,"mod_rewrite",-1),ln=s(" is enabled and that your virtual host settings allows to perform URL rewriting:"),rn=t(`<div class="language-apacheconf ext-apacheconf line-numbers-mode"><pre class="language-apacheconf"><code>    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>Directory</span><span class="token directive-block-parameter attr-value"> /var/www/html</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-inline property">Options</span> -Indexes +FollowSymLinks +MultiViews
        <span class="token directive-inline property">AllowOverride</span> All
        <span class="token directive-inline property">Require</span> all granted
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Apache configuration <code>.htaccess</code> files are already included in the software.</p><h4 id="restrict-direct-access-to-php-files" tabindex="-1"><a class="header-anchor" href="#restrict-direct-access-to-php-files" aria-hidden="true">#</a> Restrict direct access to PHP files</h4>`,3),un=s("Edit the "),dn={href:"https://httpd.apache.org/docs/2.4/vhosts/",target:"_blank",rel:"noopener noreferrer"},kn=s("Virtual Host"),bn=s(" entry by adding the following directive for your upload directory. This will disable PHP interpreter on folders containing public upload content:"),hn=t(`<blockquote><p>Must edit <code>/var/www/html/images</code> to reflect your actual upload directory.</p></blockquote><div class="language-apacheconf ext-apacheconf line-numbers-mode"><pre class="language-apacheconf"><code><span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>Directory</span><span class="token directive-block-parameter attr-value"> /var/www/html/images</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-inline property">AllowOverride</span> None
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>FilesMatch</span><span class="token directive-block-parameter attr-value"> &quot;\\.(?<span class="token punctuation">:</span>[Pp][Hh][Pp][345]?|[Pp][Hh][Tt][Mm][Ll])|(po|sql|html?)$&quot;</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> !mod_authz_core.c</span><span class="token punctuation">&gt;</span></span>
            <span class="token directive-inline property">Order</span> <span class="token directive-inline property">Allow</span>,Deny
            <span class="token directive-inline property">Deny</span> from all
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_authz_core.c</span><span class="token punctuation">&gt;</span></span>
            <span class="token directive-inline property">Require</span> all denied
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>FilesMatch</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_php7.c</span><span class="token punctuation">&gt;</span></span>
        php_flag engine off
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>FilesMatch</span><span class="token directive-block-parameter attr-value"> <span class="token string">&quot;.+\\.*$&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-inline property">SetHandler</span> !
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>FilesMatch</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_rewrite.c</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-inline property">RewriteRule</span><span class="token regex"> ^.*\\.php$</span> - <span class="token directive-flags keyword">[F,L]</span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>If you don&#39;t have access to editing Apache Virtual Host you can use a <code>.htaccess</code> file in the alleged paths:</p><div class="language-apacheconf ext-apacheconf line-numbers-mode"><pre class="language-apacheconf"><code><span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>FilesMatch</span><span class="token directive-block-parameter attr-value"> &quot;\\.(?<span class="token punctuation">:</span>[Pp][Hh][Pp][345]?|[Pp][Hh][Tt][Mm][Ll])|(po|sql|html?)$&quot;</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> !mod_authz_core.c</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-inline property">Order</span> <span class="token directive-inline property">Allow</span>,Deny
        <span class="token directive-inline property">Deny</span> from all
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_authz_core.c</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-inline property">Require</span> all denied
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>FilesMatch</span><span class="token punctuation">&gt;</span></span>
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_php7.c</span><span class="token punctuation">&gt;</span></span>
    php_flag engine off
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>FilesMatch</span><span class="token directive-block-parameter attr-value"> <span class="token string">&quot;.+\\.*$&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-inline property">SetHandler</span> !
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>FilesMatch</span><span class="token punctuation">&gt;</span></span>
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_rewrite.c</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-inline property">RewriteRule</span><span class="token regex"> ^.*\\.php$</span> - <span class="token directive-flags keyword">[F,L]</span>
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> NGINX</h3><p><code>nginx.conf</code> for <code>server {}</code> block:</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>    <span class="token comment"># Disable access to sensitive application files</span>
    <span class="token directive"><span class="token keyword">location</span> ~* (app|content|lib)/.*\\.(po|php|lock|sql)$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">404</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> ~* composer\\.json|composer\\.lock|.gitignore$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">404</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> ~* /\\.ht</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">404</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># Image not found replacement</span>
    <span class="token directive"><span class="token keyword">location</span> ~* \\.(jpe?g|png|gif|webp)$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">log_not_found</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> /content/images/system/default/404.gif</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># CORS header (avoids font rendering issues)</span>
    <span class="token directive"><span class="token keyword">location</span> ~* \\.(ttf|ttc|otf|eot|woff|woff2|font.css|css|js)$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">add_header</span> Access-Control-Allow-Origin <span class="token string">&quot;*&quot;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># PHP front controller</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">index</span> index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.php<span class="token variable">$is_args</span><span class="token variable">$query_string</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment"># Single PHP-entrypoint (disables direct access to .php files)</span>
    <span class="token directive"><span class="token keyword">location</span> ~* \\.php$</span>  <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">internal</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">include</span> snippets/fastcgi-php.conf</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_pass</span> unix:/var/run/php/php7.4-fpm.sock</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="real-connecting-ip" tabindex="-1"><a class="header-anchor" href="#real-connecting-ip" aria-hidden="true">#</a> Real connecting IP</h3>`,8),mn=s("For setups under any kind of proxy (including "),gn={href:"https://support.cloudflare.com/hc/en-us/articles/200170786-Restoring-original-visitor-IPs",target:"_blank",rel:"noopener noreferrer"},vn=s("CloudFlare"),fn=s(") is required that the web server sets the appropriate value for the client connecting IP."),_n=n("div",{class:"custom-container danger"},[n("p",{class:"custom-container-title"},"DANGER"),n("p",null,"If real connecting IP is not configured Chevereto won't be able to detect the real visitors IPs, failing to deliver IP based restrictions and flood control.")],-1),yn=n("ul",null,[n("li",null,[s("NGINX: "),n("code",null,"ngx_http_realip_module")]),n("li",null,[s("Apache HTTP Server: "),n("code",null,"mod_remoteip")])],-1);function wn(xn,Pn){const e=c("ExternalLinkIcon"),o=c("RouterLink");return l(),i(r,null,[k,n("p",null,[b,n("a",h,[m,a(e)]),g]),n("ul",null,[n("li",null,[n("a",v,[f,a(e)]),_]),n("li",null,[n("a",y,[w,a(e)]),x,n("a",P,[q,a(e)]),M])]),I,n("p",null,[H,n("a",C,[R,a(e)]),D]),F,n("ul",null,[n("li",null,[n("a",E,[L,a(e)])])]),A,G,n("p",null,[$,a(o,{to:"/en/setup/server/settings-file.html"},{default:p(()=>[B]),_:1}),S]),N,n("div",T,[z,n("p",null,[V,a(o,{to:"/en/setup/server/settings-file.html"},{default:p(()=>[O]),_:1}),j]),W]),J,n("p",null,[U,a(o,{to:"/en/setup/server/environment.html#image-handling-variables"},{default:p(()=>[K]),_:1}),X]),Y,n("div",Q,[Z,n("p",null,[nn,n("a",sn,[an,a(e)])])]),en,tn,n("p",null,[on,n("a",pn,[cn,a(e)]),ln]),rn,n("p",null,[un,n("a",dn,[kn,a(e)]),bn]),hn,n("p",null,[mn,n("a",gn,[vn,a(e)]),fn]),_n,yn],64)}var In=u(d,[["render",wn]]);export{In as default};
